{"version":3,"file":"slide-8a6aa189.js","sources":["../../../.svelte-kit/adapter-node/chunks/slide.js"],"sourcesContent":["import { c as create_ssr_component, h as createEventDispatcher, d as add_attribute, q as add_styles, b as subscribe, e as escape } from \"./index3.js\";\nimport \"./coverslipTable.svelte_svelte_type_style_lang.js\";\nimport { create } from \"qrcode\";\nimport { p as page } from \"./stores.js\";\nconst css$1 = {\n  code: \".coverslip.svelte-8acoe0{width:calc(var(--st-slide-width) * 0.45);aspect-ratio:1;background-color:var(--br-dark, rgba(255,255,255, 0.1))\\n\t\t\tvar(--br-light, rgba(0, 0, 0, 0.05));display:flex;align-items:center;justify-content:center;font-size:20px;border-radius:2px;cursor:pointer;transform:translate(-50%, -50%);left:calc(var(--pos-x) * 100%);top:calc(var(--pos-y) * 100%)}div.coverslip.active.svelte-8acoe0{cursor:default}.slide-surface .coverslip.svelte-8acoe0{position:absolute}.coverslip.round.svelte-8acoe0{border-radius:50%}.coverslip.active.svelte-8acoe0{background-color:var(--br-dark, hsl(225deg 100% 60%))\\n\t\t\tvar(--br-light, hsl(225deg 100% 55%))}.coverslip.draggable.svelte-8acoe0{cursor:grab}.coverslip.dragging{user-select:none;cursor:grabbing !important}\",\n  map: null\n};\nconst SEARCH_MIN_X = 0.275;\nconst SEARCH_MIN_Y = 0.125;\nconst Coverslip = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let positionX;\n  let positionY;\n  let shape;\n  let { active = false } = $$props;\n  let { draggable = false } = $$props;\n  let { href = \"\" } = $$props;\n  let { position = \"drag\" } = $$props;\n  let { coverslip } = $$props;\n  createEventDispatcher();\n  if ($$props.active === void 0 && $$bindings.active && active !== void 0)\n    $$bindings.active(active);\n  if ($$props.draggable === void 0 && $$bindings.draggable && draggable !== void 0)\n    $$bindings.draggable(draggable);\n  if ($$props.href === void 0 && $$bindings.href && href !== void 0)\n    $$bindings.href(href);\n  if ($$props.position === void 0 && $$bindings.position && position !== void 0)\n    $$bindings.position(position);\n  if ($$props.coverslip === void 0 && $$bindings.coverslip && coverslip !== void 0)\n    $$bindings.coverslip(coverslip);\n  $$result.css.add(css$1);\n  ({ positionX = SEARCH_MIN_X, positionY = SEARCH_MIN_Y, shape = \"round\" } = coverslip);\n  return `${href ? `<a${add_attribute(\"href\", href, 0)} class=\"${[\n    \"coverslip svelte-8acoe0\",\n    (active ? \"active\" : \"\") + \" \" + (shape === \"round\" ? \"round\" : \"\") + \" \" + (draggable ? \"draggable\" : \"\")\n  ].join(\" \").trim()}\"${add_styles({\n    \"--pos-x\": positionX,\n    \"--pos-y\": positionY\n  })}>${slots.default ? slots.default({}) : ``}</a>` : `<div class=\"${[\n    \"coverslip svelte-8acoe0\",\n    (active ? \"active\" : \"\") + \" \" + (shape === \"round\" ? \"round\" : \"\") + \" \" + (draggable ? \"draggable\" : \"\")\n  ].join(\" \").trim()}\"${add_styles({\n    \"--pos-x\": positionX,\n    \"--pos-y\": positionY\n  })}>${slots.default ? slots.default({}) : ``}</div>`}`;\n});\nfunction svgCmd(cmd, x, y) {\n  let str = cmd + x;\n  if (typeof y !== \"undefined\")\n    str += ` ${y}`;\n  return str;\n}\nfunction qrToPath(options) {\n  const { data, size, margin = 0 } = options;\n  let path = \"\";\n  let moveBy = 0;\n  let newRow = false;\n  let lineLength = 0;\n  for (let i = 0; i < data.length; i++) {\n    const col = Math.floor(i % size);\n    const row = Math.floor(i / size);\n    if (!col && !newRow)\n      newRow = true;\n    if (data[i]) {\n      lineLength++;\n      if (!(i > 0 && col > 0 && data[i - 1])) {\n        path += newRow ? svgCmd(\"M\", col + margin, 0.5 + row + margin) : svgCmd(\"m\", moveBy, 0);\n        moveBy = 0;\n        newRow = false;\n      }\n      if (!(col + 1 < size && data[i + 1])) {\n        path += svgCmd(\"h\", lineLength);\n        lineLength = 0;\n      }\n    } else {\n      moveBy++;\n    }\n  }\n  return path;\n}\nfunction createQRCode(url, slideId) {\n  const slideUrl = new URL(`${url.protocol}//${url.host}`);\n  slideUrl.pathname = `/slide/${slideId}`;\n  const qrCode = create(slideUrl.href, { errorCorrectionLevel: \"H\" });\n  const { data, size } = qrCode.modules;\n  return {\n    svgSize: size,\n    svgPath: qrToPath({\n      data: Array.from(data),\n      size\n    })\n  };\n}\nconst css = {\n  code: \".slide.svelte-mwm18m{width:var(--st-slide-width);aspect-ratio:1/3;display:grid;grid-template-rows:3fr 1fr;box-shadow:var(--st-box-shadow);background-color:var(--br-dark, rgba(255,255,255, 0.1))\\n\t\t\tvar(--br-light, rgba(0, 0, 0, 0.05))}.slide-surface.svelte-mwm18m{position:relative}.slide-label.svelte-mwm18m{border-top:var(--st-border);min-height:0;display:grid;align-items:center;justify-content:center;background-color:rgba(255, 255, 255, 0.75)}svg.svelte-mwm18m{height:80%;aspect-ratio:1;opacity:0.75}path.svelte-mwm18m{stroke:#000}\",\n  map: null\n};\nconst Slide = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let $page, $$unsubscribe_page;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  let { slideId = \"\" } = $$props;\n  let svgPath;\n  let svgSize;\n  function updateQrCode(slideId2) {\n    if (!slideId2)\n      return;\n    ({ svgPath, svgSize } = createQRCode($page.url, slideId2));\n  }\n  if ($$props.slideId === void 0 && $$bindings.slideId && slideId !== void 0)\n    $$bindings.slideId(slideId);\n  $$result.css.add(css);\n  {\n    updateQrCode(slideId);\n  }\n  $$unsubscribe_page();\n  return `<div class=\"${\"slide svelte-mwm18m\"}\"><div class=\"${\"slide-surface svelte-mwm18m\"}\">${slots.default ? slots.default({}) : ``}</div>\n\t<div class=\"${\"slide-label svelte-mwm18m\"}\">${slideId ? `<svg id=\"${\"id\" + escape(slideId, true)}\" viewBox=\"${\"0 0 \" + escape(svgSize, true) + \" \" + escape(svgSize, true)}\" class=\"${\"print svelte-mwm18m\"}\"><path${add_attribute(\"d\", svgPath, 0)} class=\"${\"svelte-mwm18m\"}\"></path></svg>` : ``}</div>\n</div>`;\n});\nexport {\n  Coverslip as C,\n  Slide as S,\n  createQRCode as c\n};\n"],"names":[],"mappings":"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"}