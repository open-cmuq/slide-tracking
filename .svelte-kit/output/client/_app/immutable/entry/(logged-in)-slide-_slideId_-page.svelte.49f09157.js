import{S as kt,i as wt,s as Et,a as V,z as N,k as g,r as j,E as yt,h as a,c as B,A as R,l as k,m as w,u as M,p as I,b as h,B as P,I as v,d as y,f as ye,g as E,v as ae,C as O,J as Dt,Y as It,o as jt,a5 as Mt,n as ue,w as De,x as rt,U as be,e as Ye,q as ot,N as se,M as bt,V as ht,a6 as Ct,R as Pe}from"../chunks/index.79e82b19.js";import{B as Vt}from"../chunks/breadcrumb-bar.af299c11.js";import{B as Bt}from"../chunks/breadcrumb-link.baa4a678.js";import{B as St}from"../chunks/breadcrumb-list.469cd59f.js";import{M as oe,m as ft,c as gt,p as Tt,q as Nt,r as Rt,s as Pt}from"../chunks/coverslipTable.svelte_svelte_type_style_lang.6429d3c8.js";import{B as Oe}from"../chunks/button-item.6bf52554.js";import{D as Ot}from"../chunks/dropdown-item.72bb262e.js";import{L as Yt}from"../chunks/link-item.06f44794.js";import{p as At}from"../chunks/stores.2aba5b55.js";import{S as Ut,C as Xt}from"../chunks/slide.c2dc0211.js";import{I as qt}from"../chunks/item-list-divider.506d6f65.js";import{P as Lt}from"../chunks/plate.ec2c03ed.js";import{f as at}from"../chunks/index.b48e78f2.js";const{document:Qe}=Mt;function ut(s,e,l){const t=s.slice();return t[23]=e[l],t[26]=e,t[25]=l,t}function ct(s,e,l){const t=s.slice();return t[23]=e[l],t[25]=l,t}function zt(s){let e;return{c(){e=j("My projects")},l(l){e=M(l,"My projects")},m(l,t){h(l,e,t)},d(l){l&&a(e)}}}function Qt(s){let e=s[0].slide.type==="plate"?"Edit plate":"Edit slide",l;return{c(){l=j(e)},l(t){l=M(t,e)},m(t,n){h(t,l,n)},p(t,n){n&1&&e!==(e=t[0].slide.type==="plate"?"Edit plate":"Edit slide")&&ae(l,e)},d(t){t&&a(l)}}}function dt(s){let e,l;return e=new Oe({props:{$$slots:{default:[Gt]},$$scope:{ctx:s}}}),e.$on("click",function(){be(s[6].deleteSlide.bind(null,s[0].slide))&&s[6].deleteSlide.bind(null,s[0].slide).apply(this,arguments)}),{c(){N(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){s=t;const r={};n&134217728&&(r.$$scope={dirty:n,ctx:s}),e.$set(r)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function Gt(s){let e;return{c(){e=j("Delete slide")},l(l){e=M(l,"Delete slide")},m(l,t){h(l,e,t)},d(l){l&&a(e)}}}function Jt(s){let e;return{c(){e=j("Add coverslip")},l(l){e=M(l,"Add coverslip")},m(l,t){h(l,e,t)},d(l){l&&a(e)}}}function Wt(s){let e;return{c(){e=j("Print the QR Code")},l(l){e=M(l,"Print the QR Code")},m(l,t){h(l,e,t)},d(l){l&&a(e)}}}function Ft(s){let e,l,t,n,r,o,p,f,c;e=new Oe({props:{$$slots:{default:[Qt]},$$scope:{ctx:s}}}),e.$on("click",function(){be(s[6].slide.bind(null,"edit",s[0].slide))&&s[6].slide.bind(null,"edit",s[0].slide).apply(this,arguments)});let m=s[0].slide.type=="slide"&&dt(s);return n=new qt({}),o=new Oe({props:{$$slots:{default:[Jt]},$$scope:{ctx:s}}}),o.$on("click",function(){be(s[6].createCoverslip.bind(null,s[5]))&&s[6].createCoverslip.bind(null,s[5]).apply(this,arguments)}),f=new Oe({props:{$$slots:{default:[Wt]},$$scope:{ctx:s}}}),f.$on("click",s[7]),{c(){N(e.$$.fragment),l=V(),m&&m.c(),t=V(),N(n.$$.fragment),r=V(),N(o.$$.fragment),p=V(),N(f.$$.fragment)},l(i){R(e.$$.fragment,i),l=B(i),m&&m.l(i),t=B(i),R(n.$$.fragment,i),r=B(i),R(o.$$.fragment,i),p=B(i),R(f.$$.fragment,i)},m(i,_){P(e,i,_),h(i,l,_),m&&m.m(i,_),h(i,t,_),P(n,i,_),h(i,r,_),P(o,i,_),h(i,p,_),P(f,i,_),c=!0},p(i,_){s=i;const C={};_&134217729&&(C.$$scope={dirty:_,ctx:s}),e.$set(C),s[0].slide.type=="slide"?m?(m.p(s,_),_&1&&E(m,1)):(m=dt(s),m.c(),E(m,1),m.m(t.parentNode,t)):m&&(De(),y(m,1,1,()=>{m=null}),ye());const u={};_&134217728&&(u.$$scope={dirty:_,ctx:s}),o.$set(u);const d={};_&134217728&&(d.$$scope={dirty:_,ctx:s}),f.$set(d)},i(i){c||(E(e.$$.fragment,i),E(m),E(n.$$.fragment,i),E(o.$$.fragment,i),E(f.$$.fragment,i),c=!0)},o(i){y(e.$$.fragment,i),y(m),y(n.$$.fragment,i),y(o.$$.fragment,i),y(f.$$.fragment,i),c=!1},d(i){O(e,i),i&&a(l),m&&m.d(i),i&&a(t),O(n,i),i&&a(r),O(o,i),i&&a(p),O(f,i)}}}function Ht(s){let e,l,t,n,r,o,p,f,c,m;return e=new Bt({props:{href:"/projects",$$slots:{default:[zt]},$$scope:{ctx:s}}}),t=new oe({props:{d:ft}}),r=new St({}),p=new oe({props:{d:ft}}),c=new Ot({props:{title:s[0].slide.title,$$slots:{default:[Ft]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment),l=V(),N(t.$$.fragment),n=V(),N(r.$$.fragment),o=V(),N(p.$$.fragment),f=V(),N(c.$$.fragment)},l(i){R(e.$$.fragment,i),l=B(i),R(t.$$.fragment,i),n=B(i),R(r.$$.fragment,i),o=B(i),R(p.$$.fragment,i),f=B(i),R(c.$$.fragment,i)},m(i,_){P(e,i,_),h(i,l,_),P(t,i,_),h(i,n,_),P(r,i,_),h(i,o,_),P(p,i,_),h(i,f,_),P(c,i,_),m=!0},p(i,_){const C={};_&134217728&&(C.$$scope={dirty:_,ctx:i}),e.$set(C);const u={};_&1&&(u.title=i[0].slide.title),_&134217761&&(u.$$scope={dirty:_,ctx:i}),c.$set(u)},i(i){m||(E(e.$$.fragment,i),E(t.$$.fragment,i),E(r.$$.fragment,i),E(p.$$.fragment,i),E(c.$$.fragment,i),m=!0)},o(i){y(e.$$.fragment,i),y(t.$$.fragment,i),y(r.$$.fragment,i),y(p.$$.fragment,i),y(c.$$.fragment,i),m=!1},d(i){O(e,i),i&&a(l),O(t,i),i&&a(n),O(r,i),i&&a(o),O(p,i),i&&a(f),O(c,i)}}}function mt(s){let e;return{c(){e=g("div"),this.h()},l(l){e=k(l,"DIV",{class:!0}),w(e).forEach(a),this.h()},h(){I(e,"class","selection-rectangle svelte-14wme5j")},m(l,t){h(l,e,t),s[14](e)},p:ue,d(l){l&&a(e),s[14](null)}}}function Kt(s){let e,l,t,n,r,o,p,f,c,m;const i=[el,xt],_=[];function C(d,D){return d[1]?0:1}l=C(s),t=_[l]=i[l](s),r=new Lt({props:{slideId:s[5],$$slots:{default:[sl]},$$scope:{ctx:s}}});let u=s[1]&&pt(s);return{c(){e=g("button"),t.c(),n=V(),N(r.$$.fragment),o=V(),u&&u.c(),p=Ye(),this.h()},l(d){e=k(d,"BUTTON",{class:!0,style:!0});var D=w(e);t.l(D),D.forEach(a),n=B(d),R(r.$$.fragment,d),o=B(d),u&&u.l(d),p=Ye(),this.h()},h(){I(e,"class","selectbutton svelte-14wme5j"),ot(e,"background-color",s[1]?"orange":"green")},m(d,D){h(d,e,D),_[l].m(e,null),h(d,n,D),P(r,d,D),h(d,o,D),u&&u.m(d,D),h(d,p,D),f=!0,c||(m=se(e,"click",s[9]),c=!0)},p(d,D){let Y=l;l=C(d),l===Y?_[l].p(d,D):(De(),y(_[Y],1,1,()=>{_[Y]=null}),ye(),t=_[l],t?t.p(d,D):(t=_[l]=i[l](d),t.c()),E(t,1),t.m(e,null)),(!f||D&2)&&ot(e,"background-color",d[1]?"orange":"green");const T={};D&32&&(T.slideId=d[5]),D&134217743&&(T.$$scope={dirty:D,ctx:d}),r.$set(T),d[1]?u?u.p(d,D):(u=pt(d),u.c(),u.m(p.parentNode,p)):u&&(u.d(1),u=null)},i(d){f||(E(t),E(r.$$.fragment,d),f=!0)},o(d){y(t),y(r.$$.fragment,d),f=!1},d(d){d&&a(e),_[l].d(),d&&a(n),O(r,d),d&&a(o),u&&u.d(d),d&&a(p),c=!1,m()}}}function Zt(s){let e,l;return e=new Ut({props:{slideId:s[5],$$slots:{default:[nl]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const r={};n&32&&(r.slideId=t[5]),n&134217729&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function xt(s){let e,l;return e=new oe({props:{d:Pt}}),{c(){N(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p:ue,i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function el(s){let e,l;return e=new oe({props:{d:gt}}),{c(){N(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p:ue,i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function tl(s){let e=s[25]+1+"",l;return{c(){l=j(e)},l(t){l=M(t,e)},m(t,n){h(t,l,n)},d(t){t&&a(l)}}}function ll(s){let e;return{c(){e=j("+")},l(l){e=M(l,"+")},m(l,t){h(l,e,t)},d(l){l&&a(e)}}}function _t(s){let e,l,t,n,r=s[25],o,p;function f(u,d){return d&5&&(l=null),l==null&&(l=!!u[2].has(u[23].id)),l?ll:tl}let c=f(s,-1),m=c(s);const i=()=>s[15](e,r),_=()=>s[15](null,r);function C(){return s[16](s[23])}return{c(){e=g("a"),m.c(),t=V(),this.h()},l(u){e=k(u,"A",{class:!0,href:!0});var d=w(e);m.l(d),t=B(d),d.forEach(a),this.h()},h(){I(e,"class",Ct(`my-anchor-${s[25]}`)+" svelte-14wme5j"),I(e,"href",n=s[1]?"":`/coverslip/${s[23].id}`),Pe(e,"selected-well",s[2].has(s[23].id)),Pe(e,"empty-coverslip",!s[2].has(s[23].id))},m(u,d){h(u,e,d),m.m(e,null),v(e,t),i(),o||(p=se(e,"click",C),o=!0)},p(u,d){s=u,c!==(c=f(s,d))&&(m.d(1),m=c(s),m&&(m.c(),m.m(e,t))),d&3&&n!==(n=s[1]?"":`/coverslip/${s[23].id}`)&&I(e,"href",n),r!==s[25]&&(_(),r=s[25],i()),d&5&&Pe(e,"selected-well",s[2].has(s[23].id)),d&5&&Pe(e,"empty-coverslip",!s[2].has(s[23].id))},d(u){u&&a(e),m.d(),_(),o=!1,p()}}}function sl(s){var p;let e,l,t,n,r=(p=s[0].slide)==null?void 0:p.coverslips,o=[];for(let f=0;f<r.length;f+=1)o[f]=_t(ut(s,r,f));return{c(){e=g("div"),l=g("div");for(let f=0;f<o.length;f+=1)o[f].c();this.h()},l(f){e=k(f,"DIV",{class:!0});var c=w(e);l=k(c,"DIV",{class:!0});var m=w(l);for(let i=0;i<o.length;i+=1)o[i].l(m);m.forEach(a),c.forEach(a),this.h()},h(){I(l,"class","plate-grid svelte-14wme5j"),I(e,"class","platediv svelte-14wme5j")},m(f,c){h(f,e,c),v(e,l);for(let m=0;m<o.length;m+=1)o[m].m(l,null);t||(n=[se(e,"mousedown",s[10]),se(e,"mouseup",s[11]),se(e,"mousemove",s[12])],t=!0)},p(f,c){var m;if(c&271){r=(m=f[0].slide)==null?void 0:m.coverslips;let i;for(i=0;i<r.length;i+=1){const _=ut(f,r,i);o[i]?o[i].p(_,c):(o[i]=_t(_),o[i].c(),o[i].m(l,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=r.length}},d(f){f&&a(e),bt(o,f),t=!1,ht(n)}}}function pt(s){let e,l,t,n;return{c(){e=g("button"),l=j("Edit selected"),this.h()},l(r){e=k(r,"BUTTON",{class:!0});var o=w(e);l=M(o,"Edit selected"),o.forEach(a),this.h()},h(){I(e,"class","editbutton svelte-14wme5j")},m(r,o){h(r,e,o),v(e,l),t||(n=se(e,"click",function(){be(s[2].size!=0?s[6].editCoverslips.bind(null,Array.from(s[2]),s[0].slide.id):{})&&(s[2].size!=0?s[6].editCoverslips.bind(null,Array.from(s[2]),s[0].slide.id):{}).apply(this,arguments)}),t=!0)},p(r,o){s=r},d(r){r&&a(e),t=!1,n()}}}function il(s){let e,l=s[25]+1+"",t,n;return{c(){e=j("#"),t=j(l),n=V()},l(r){e=M(r,"#"),t=M(r,l),n=B(r)},m(r,o){h(r,e,o),h(r,t,o),h(r,n,o)},p:ue,d(r){r&&a(e),r&&a(t),r&&a(n)}}}function $t(s){let e,l;return e=new Xt({props:{coverslip:s[23],href:"/coverslip/"+s[23].id,$$slots:{default:[il]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.coverslip=t[23]),n&1&&(r.href="/coverslip/"+t[23].id),n&134217728&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function nl(s){let e,l,t=s[0].slide.coverslips,n=[];for(let o=0;o<t.length;o+=1)n[o]=$t(ct(s,t,o));const r=o=>y(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ye()},l(o){for(let p=0;p<n.length;p+=1)n[p].l(o);e=Ye()},m(o,p){for(let f=0;f<n.length;f+=1)n[f].m(o,p);h(o,e,p),l=!0},p(o,p){if(p&1){t=o[0].slide.coverslips;let f;for(f=0;f<t.length;f+=1){const c=ct(o,t,f);n[f]?(n[f].p(c,p),E(n[f],1)):(n[f]=$t(c),n[f].c(),E(n[f],1),n[f].m(e.parentNode,e))}for(De(),f=t.length;f<n.length;f+=1)r(f);ye()}},i(o){if(!l){for(let p=0;p<t.length;p+=1)E(n[p]);l=!0}},o(o){n=n.filter(Boolean);for(let p=0;p<n.length;p+=1)y(n[p]);l=!1},d(o){bt(n,o),o&&a(e)}}}function rl(s){let e,l;return e=new Yt({props:{href:"/slide/"+s[5]+"/table",$$slots:{default:[fl]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){P(e,t,n),l=!0},p(t,n){const r={};n&32&&(r.href="/slide/"+t[5]+"/table"),n&134217728&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(E(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function ol(s){let e,l,t,n,r,o,p,f,c,m,i,_,C;return l=new oe({props:{d:gt}}),o=new oe({props:{d:Tt}}),m=new oe({props:{d:Nt}}),{c(){e=g("button"),N(l.$$.fragment),t=j(`
							Add coverslip`),n=V(),r=g("button"),N(o.$$.fragment),p=j(`
							Edit slide`),f=V(),c=g("button"),N(m.$$.fragment)},l(u){e=k(u,"BUTTON",{});var d=w(e);R(l.$$.fragment,d),t=M(d,`
							Add coverslip`),d.forEach(a),n=B(u),r=k(u,"BUTTON",{});var D=w(r);R(o.$$.fragment,D),p=M(D,`
							Edit slide`),D.forEach(a),f=B(u),c=k(u,"BUTTON",{});var Y=w(c);R(m.$$.fragment,Y),Y.forEach(a)},m(u,d){h(u,e,d),P(l,e,null),v(e,t),h(u,n,d),h(u,r,d),P(o,r,null),v(r,p),h(u,f,d),h(u,c,d),P(m,c,null),i=!0,_||(C=[se(e,"click",function(){be(s[6].createCoverslip.bind(null,s[5]))&&s[6].createCoverslip.bind(null,s[5]).apply(this,arguments)}),se(r,"click",function(){be(s[6].slide.bind(null,"edit",s[0].slide))&&s[6].slide.bind(null,"edit",s[0].slide).apply(this,arguments)}),se(c,"click",s[7])],_=!0)},p(u,d){s=u},i(u){i||(E(l.$$.fragment,u),E(o.$$.fragment,u),E(m.$$.fragment,u),i=!0)},o(u){y(l.$$.fragment,u),y(o.$$.fragment,u),y(m.$$.fragment,u),i=!1},d(u){u&&a(e),O(l),u&&a(n),u&&a(r),O(o),u&&a(f),u&&a(c),O(m),_=!1,ht(C)}}}function fl(s){let e,l,t,n;return l=new oe({props:{d:Rt}}),{c(){e=g("button"),N(l.$$.fragment),t=j(`
							Table view`)},l(r){e=k(r,"BUTTON",{});var o=w(e);R(l.$$.fragment,o),t=M(o,`
							Table view`),o.forEach(a)},m(r,o){h(r,e,o),P(l,e,null),v(e,t),n=!0},p:ue,i(r){n||(E(l.$$.fragment,r),n=!0)},o(r){y(l.$$.fragment,r),n=!1},d(r){r&&a(e),O(l)}}}function al(s){let e,l,t;return{c(){e=g("em"),l=j("unknown"),t=j(",")},l(n){e=k(n,"EM",{});var r=w(e);l=M(r,"unknown"),r.forEach(a),t=M(n,",")},m(n,r){h(n,e,r),v(e,l),h(n,t,r)},p:ue,d(n){n&&a(e),n&&a(t)}}}function ul(s){let e=s[0].slide.boxNumber+"",l;return{c(){l=j(e)},l(t){l=M(t,e)},m(t,n){h(t,l,n)},p(t,n){n&1&&e!==(e=t[0].slide.boxNumber+"")&&ae(l,e)},d(t){t&&a(l)}}}function cl(s){let e,l;return{c(){e=g("em"),l=j("unknown")},l(t){e=k(t,"EM",{});var n=w(e);l=M(n,"unknown"),n.forEach(a)},m(t,n){h(t,e,n),v(e,l)},p:ue,d(t){t&&a(e)}}}function dl(s){let e=s[0].slide.boxPosition+"",l;return{c(){l=j(e)},l(t){l=M(t,e)},m(t,n){h(t,l,n)},p(t,n){n&1&&e!==(e=t[0].slide.boxPosition+"")&&ae(l,e)},d(t){t&&a(l)}}}function vt(s){let e,l,t,n,r,o=s[0].slide.comments+"",p;return{c(){e=g("div"),l=g("div"),t=j("Comments"),n=V(),r=g("div"),p=j(o),this.h()},l(f){e=k(f,"DIV",{class:!0});var c=w(e);l=k(c,"DIV",{class:!0});var m=w(l);t=M(m,"Comments"),m.forEach(a),n=B(c),r=k(c,"DIV",{});var i=w(r);p=M(i,o),i.forEach(a),c.forEach(a),this.h()},h(){I(l,"class","field svelte-14wme5j"),I(e,"class","item svelte-14wme5j")},m(f,c){h(f,e,c),v(e,l),v(l,t),v(e,n),v(e,r),v(r,p)},p(f,c){c&1&&o!==(o=f[0].slide.comments+"")&&ae(p,o)},d(f){f&&a(e)}}}function ml(s){let e,l,t,n,r,o,p,f,c,m,i,_,C,u,d,D,Y,T=s[0].slide.experiment.title+"",ce,de,he,x,L,z,ge,J,b,A,Q,q,fe,ee,W,K,Z,me,Ae,Ue,_e,ke=s[0].slide.createdBy.name+"",Ie,Xe,ie,pe,qe,Le,$e,we=at(new Date(s[0].slide.observedOn),"EEEE, MMM dd yyyy")+"",je,ze,te;Qe.title=e=s[0].slide.title+" | Slide Tracking",t=new Vt({props:{$$slots:{default:[Ht]},$$scope:{ctx:s}}});let U=s[1]&&mt(s);const Ge=[Zt,Kt],ne=[];function Je($,S){return $[0].slide.type=="slide"?0:1}f=Je(s),c=ne[f]=Ge[f](s);const We=[ol,rl],re=[];function Fe($,S){return $[0].slide.type=="slide"?0:1}L=Fe(s),z=re[L]=We[L](s);function He($,S){return $[0].slide.boxNumber?ul:al}let Me=He(s),F=Me(s);function Ke($,S){return $[0].slide.boxPosition?dl:cl}let Ce=Ke(s),H=Ce(s),X=s[0].slide.comments&&vt(s);return{c(){l=V(),N(t.$$.fragment),n=V(),r=g("div"),U&&U.c(),o=V(),p=g("div"),c.c(),m=V(),i=g("div"),_=g("div"),C=g("div"),u=g("div"),d=j("Experiment"),D=V(),Y=g("a"),ce=j(T),he=V(),x=g("div"),z.c(),ge=V(),J=g("div"),b=g("div"),A=j("Location"),Q=V(),q=g("div"),fe=j("Box "),F.c(),ee=j(`
				position `),H.c(),W=V(),K=g("div"),Z=g("div"),me=g("div"),Ae=j("Prepared by"),Ue=V(),_e=g("div"),Ie=j(ke),Xe=V(),ie=g("div"),pe=g("div"),qe=j("Observed on"),Le=V(),$e=g("div"),je=j(we),ze=V(),X&&X.c(),this.h()},l($){yt("svelte-1pq79r3",Qe.head).forEach(a),l=B($),R(t.$$.fragment,$),n=B($),r=k($,"DIV",{class:!0});var le=w(r);U&&U.l(le),o=B(le),p=k(le,"DIV",{class:!0});var ve=w(p);c.l(ve),ve.forEach(a),m=B(le),i=k(le,"DIV",{});var G=w(i);_=k(G,"DIV",{class:!0});var Ve=w(_);C=k(Ve,"DIV",{class:!0});var Be=w(C);u=k(Be,"DIV",{class:!0});var Ze=w(u);d=M(Ze,"Experiment"),Ze.forEach(a),D=B(Be),Y=k(Be,"A",{class:!0,href:!0});var xe=w(Y);ce=M(xe,T),xe.forEach(a),Be.forEach(a),he=B(Ve),x=k(Ve,"DIV",{class:!0});var et=w(x);z.l(et),et.forEach(a),Ve.forEach(a),ge=B(G),J=k(G,"DIV",{class:!0});var Se=w(J);b=k(Se,"DIV",{class:!0});var tt=w(b);A=M(tt,"Location"),tt.forEach(a),Q=B(Se),q=k(Se,"DIV",{class:!0});var Ee=w(q);fe=M(Ee,"Box "),F.l(Ee),ee=M(Ee,`
				position `),H.l(Ee),Ee.forEach(a),Se.forEach(a),W=B(G),K=k(G,"DIV",{class:!0});var Te=w(K);Z=k(Te,"DIV",{class:!0});var Ne=w(Z);me=k(Ne,"DIV",{class:!0});var lt=w(me);Ae=M(lt,"Prepared by"),lt.forEach(a),Ue=B(Ne),_e=k(Ne,"DIV",{class:!0});var st=w(_e);Ie=M(st,ke),st.forEach(a),Ne.forEach(a),Xe=B(Te),ie=k(Te,"DIV",{class:!0});var Re=w(ie);pe=k(Re,"DIV",{class:!0});var it=w(pe);qe=M(it,"Observed on"),it.forEach(a),Le=B(Re),$e=k(Re,"DIV",{class:!0});var nt=w($e);je=M(nt,we),nt.forEach(a),Re.forEach(a),Te.forEach(a),ze=B(G),X&&X.l(G),G.forEach(a),le.forEach(a),this.h()},h(){I(p,"class","slide noselect svelte-14wme5j"),I(u,"class","field svelte-14wme5j"),I(Y,"class","value svelte-14wme5j"),I(Y,"href",de="/experiment/"+s[0].slide.experiment.id),I(C,"class","experiment-container"),I(x,"class","add-button-container svelte-14wme5j"),I(_,"class","item svelte-14wme5j"),I(b,"class","field svelte-14wme5j"),I(q,"class","value svelte-14wme5j"),I(J,"class","item svelte-14wme5j"),I(me,"class","field svelte-14wme5j"),I(_e,"class","value svelte-14wme5j"),I(Z,"class","item svelte-14wme5j"),I(pe,"class","field svelte-14wme5j"),I($e,"class","value svelte-14wme5j"),I(ie,"class","item svelte-14wme5j"),I(K,"class","double-column"),I(r,"class","wrapper svelte-14wme5j")},m($,S){h($,l,S),P(t,$,S),h($,n,S),h($,r,S),U&&U.m(r,null),v(r,o),v(r,p),ne[f].m(p,null),v(r,m),v(r,i),v(i,_),v(_,C),v(C,u),v(u,d),v(C,D),v(C,Y),v(Y,ce),v(_,he),v(_,x),re[L].m(x,null),v(i,ge),v(i,J),v(J,b),v(b,A),v(J,Q),v(J,q),v(q,fe),F.m(q,null),v(q,ee),H.m(q,null),v(i,W),v(i,K),v(K,Z),v(Z,me),v(me,Ae),v(Z,Ue),v(Z,_e),v(_e,Ie),v(K,Xe),v(K,ie),v(ie,pe),v(pe,qe),v(ie,Le),v(ie,$e),v($e,je),v(i,ze),X&&X.m(i,null),te=!0},p($,[S]){(!te||S&1)&&e!==(e=$[0].slide.title+" | Slide Tracking")&&(Qe.title=e);const le={};S&134217761&&(le.$$scope={dirty:S,ctx:$}),t.$set(le),$[1]?U?U.p($,S):(U=mt($),U.c(),U.m(r,o)):U&&(U.d(1),U=null);let ve=f;f=Je($),f===ve?ne[f].p($,S):(De(),y(ne[ve],1,1,()=>{ne[ve]=null}),ye(),c=ne[f],c?c.p($,S):(c=ne[f]=Ge[f]($),c.c()),E(c,1),c.m(p,null)),(!te||S&1)&&T!==(T=$[0].slide.experiment.title+"")&&ae(ce,T),(!te||S&1&&de!==(de="/experiment/"+$[0].slide.experiment.id))&&I(Y,"href",de);let G=L;L=Fe($),L===G?re[L].p($,S):(De(),y(re[G],1,1,()=>{re[G]=null}),ye(),z=re[L],z?z.p($,S):(z=re[L]=We[L]($),z.c()),E(z,1),z.m(x,null)),Me===(Me=He($))&&F?F.p($,S):(F.d(1),F=Me($),F&&(F.c(),F.m(q,ee))),Ce===(Ce=Ke($))&&H?H.p($,S):(H.d(1),H=Ce($),H&&(H.c(),H.m(q,null))),(!te||S&1)&&ke!==(ke=$[0].slide.createdBy.name+"")&&ae(Ie,ke),(!te||S&1)&&we!==(we=at(new Date($[0].slide.observedOn),"EEEE, MMM dd yyyy")+"")&&ae(je,we),$[0].slide.comments?X?X.p($,S):(X=vt($),X.c(),X.m(i,null)):X&&(X.d(1),X=null)},i($){te||(E(t.$$.fragment,$),E(c),E(z),te=!0)},o($){y(t.$$.fragment,$),y(c),y(z),te=!1},d($){$&&a(l),O(t,$),$&&a(n),$&&a(r),U&&U.d(),ne[f].d(),re[L].d(),F.d(),H.d(),X&&X.d()}}}function _l(s,e,l){var J;let t,n;Dt(s,At,b=>l(13,n=b));const r=It("prompt");let{data:o}=e;function p(){const b=document.querySelector(`svg#id${t}`);if(!b){console.warn("Unable to find SVG with the specified ID for printing");return}const A=b.cloneNode(!0);A.style.zIndex="9999",A.classList.add("printable"),A.style.display="absolute",A.style.width="1.5cm",A.style.height="1.5cm",document.body.appendChild(A),window.print(),document.body.removeChild(A)}let f=!0,c=new Set;function m(b){f&&(c.has(b)?c.delete(b):c.add(b),l(2,c=new Set(c)))}let i=(J=o.slide)==null?void 0:J.coverslips.map(()=>({}));jt(()=>{o.slide.type=="plate"&&l(3,i=i.map((b,A)=>{const Q=document.querySelector(`.my-anchor-${A}`);return{...b,element:Q,rect:Q.getBoundingClientRect()}}))});function _(){f?(l(2,c=new Set),l(1,f=!1)):l(1,f=!0)}let C=!1,u,d,D,Y,T;function ce(b){f&&C==!1&&(u=b.clientX,d=b.clientY,C=!0)}function de(b){f&&(D=b.clientX,Y=b.clientY,x()),C&&(C=!1)}function he(b){const Q=document.querySelector(".platediv").getBoundingClientRect(),q=b.clientX>Q.left&&b.clientX<Q.right,fe=b.clientY>Q.top&&b.clientY<Q.bottom;if(C&&f&&q&&fe){T.getBoundingClientRect();const ee=b.clientX,W=b.clientY,K=Math.abs(ee-u),Z=Math.abs(W-d);l(4,T.style.left=`${Math.min(u,ee)}px`,T),l(4,T.style.top=`${Math.min(d,W)}px`,T),l(4,T.style.width=`${K}px`,T),l(4,T.style.height=`${Z}px`,T),l(4,T.style.display="block",T)}}function x(){const b=Math.min(d,Y),A=Math.max(d,Y),Q=Math.min(u,D),q=Math.max(u,D);i.forEach((fe,ee)=>{const W=fe.rect;W.left<q&&W.right>Q&&W.top<A&&W.bottom>b&&c.add(o.slide.coverslips[ee].id)}),l(2,c=new Set(c))}function L(b){rt[b?"unshift":"push"](()=>{T=b,l(4,T)})}function z(b,A){rt[b?"unshift":"push"](()=>{i[A]=b,l(3,i)})}const ge=b=>m(b.id);return s.$$set=b=>{"data"in b&&l(0,o=b.data)},s.$$.update=()=>{s.$$.dirty&8192&&l(5,{slideId:t}=n.params,t)},[o,f,c,i,T,t,r,p,m,_,ce,de,he,n,L,z,ge]}class Ml extends kt{constructor(e){super(),wt(this,e,_l,ml,Et,{data:0})}}export{Ml as default};
